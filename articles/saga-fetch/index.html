<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link href="/favicon.ico" rel="icon"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><meta content="Yury Shapkarin Home Page" name="description"><link href="/manifest.json" rel="manifest"><link href="https://fonts.googleapis.com/css?family=Lato:300" rel="stylesheet"><script type="text/javascript">!function(n){if("/"===n.search[1]){var a=n.search.slice(1).split("&").map((function(n){return n.replace(/~and~/g,"&")})).join("?");window.history.replaceState(null,null,n.pathname.slice(0,-1)+a+n.hash)}}(window.location)</script><title>saga-fetch: Streamline API Calls in Redux Saga Applications | Yury Shapkarin</title><link href="/static/css/main.c1d6deb1.chunk.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://raw.githubusercontent.com" rel="preconnect"><meta content="Learn how to simplify AJAX requests in Redux Saga with saga-fetch. Handle loading states, success/error responses, and request cancellation with minimal boilerplate code." data-react-helmet="true" name="description"><meta content="article" data-react-helmet="true" property="og:type"><meta content="saga-fetch: Streamline API Calls in Redux Saga Applications | Yury Shapkarin" data-react-helmet="true" property="og:title"><meta content="Learn how to simplify AJAX requests in Redux Saga with saga-fetch. Handle loading states, success/error responses, and request cancellation with minimal boilerplate code." data-react-helmet="true" property="og:description"><meta content="Yury Shapkarin" data-react-helmet="true" name="twitter:creator"><meta content="article" data-react-helmet="true" name="twitter:card"><meta content="saga-fetch: Streamline API Calls in Redux Saga Applications | Yury Shapkarin" data-react-helmet="true" name="twitter:title"><meta content="Learn how to simplify AJAX requests in Redux Saga with saga-fetch. Handle loading states, success/error responses, and request cancellation with minimal boilerplate code." data-react-helmet="true" name="twitter:description"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="About About_dark"><h1>Hello everyone</h1>With over 10 years of experience in software development and a strong foundation in Computer Science. My work underlines my dedication to innovation, problem-solving, and creating impactful user experiences.<br><br><a href="https://github.com/shapkarin" rel="noreferrer" target="_blank">My Github <svg fill="none" height="1em" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a><br><a href="https://github.com/shapkarin/shapkarin.me" rel="noreferrer" target="_blank">Website source code<svg fill="none" height="1em" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a><br><br>The API for this site is generated <a href="https://github.com/shapkarin/shapkarin.me/tree/master/src/Generate-Backend" rel="noreferrer" target="_blank">by this code</a><svg fill="none" height="1em" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg> and stored as <a href="https://github.com/shapkarin/shapkarin.me/tree/gh-pages/api" rel="noreferrer" target="_blank">JSON files</a><svg fill="none" height="1em" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg> on <a href="https://github.com/shapkarin/shapkarin.me/tree/main/.github/workflows/deploy.yml">GitHub Pages</a><br>semver: <a href="https://github.com/shapkarin/shapkarin.me/tree/main/.env#L1">6.1.0</a></div><div class="Wrap"><nav class="Menu"><a href="/github/repositories" class="Menu__Item"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2.75A2.75 2.75 0 0 1 5.75 0h14.5a.75.75 0 0 1 .75.75v20.5a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h5.25v-4H6A1.5 1.5 0 0 0 4.5 18v.75c0 .716.43 1.334 1.05 1.605a.75.75 0 0 1-.6 1.374A3.251 3.251 0 0 1 3 18.75ZM19.5 1.5H5.75c-.69 0-1.25.56-1.25 1.25v12.651A2.989 2.989 0 0 1 6 15h13.5Z"></path><path d="M7 18.25a.25.25 0 0 1 .25-.25h5a.25.25 0 0 1 .25.25v5.01a.25.25 0 0 1-.397.201l-2.206-1.604a.25.25 0 0 0-.294 0L7.397 23.46a.25.25 0 0 1-.397-.2v-5.01Z"></path></svg> Repositories</a><a href="/github/likes" class="Menu__Item"><svg fill="currentColor" height="1.2em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M12 .25a.75.75 0 0 1 .673.418l3.058 6.197 6.839.994a.75.75 0 0 1 .415 1.279l-4.948 4.823 1.168 6.811a.751.751 0 0 1-1.088.791L12 18.347l-6.117 3.216a.75.75 0 0 1-1.088-.79l1.168-6.812-4.948-4.823a.75.75 0 0 1 .416-1.28l6.838-.993L11.328.668A.75.75 0 0 1 12 .25Zm0 2.445L9.44 7.882a.75.75 0 0 1-.565.41l-5.725.832 4.143 4.038a.748.748 0 0 1 .215.664l-.978 5.702 5.121-2.692a.75.75 0 0 1 .698 0l5.12 2.692-.977-5.702a.748.748 0 0 1 .215-.664l4.143-4.038-5.725-.831a.75.75 0 0 1-.565-.41L12 2.694Z"></path></svg> Likes</a><a href="/packages" class="Menu__Item"><svg fill="currentColor" height="1.24em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1.24em" xmlns="http://www.w3.org/2000/svg"><path d="M20.001 3C20.5533 3 21.001 3.44772 21.001 4V20C21.001 20.5523 20.5533 21 20.001 21H4.00098C3.44869 21 3.00098 20.5523 3.00098 20V4C3.00098 3.44772 3.44869 3 4.00098 3H20.001ZM19.001 5H5.00098V19H19.001V5ZM17.001 7V17H14.501V9.5H12.001V17H7.00098V7H17.001Z"></path></svg> Packages</a><a href="/sketches" class="Menu__Item"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 2.99658H20C20.5523 2.99658 21 3.4443 21 3.99658V8.99658C21 9.54887 20.5523 9.99658 20 9.99658H4C3.44772 9.99658 3 9.54887 3 8.99658V3.99658C3 3.4443 3.44772 2.99658 4 2.99658ZM6 11.9966H12C12.5523 11.9966 13 12.4443 13 12.9966V15.9966H14V21.9966H10V15.9966H11V13.9966H5C4.44772 13.9966 4 13.5489 4 12.9966V10.9966H6V11.9966ZM17.7322 13.7288L19.5 11.961L21.2678 13.7288C22.2441 14.7051 22.2441 16.288 21.2678 17.2643C20.2915 18.2407 18.7085 18.2407 17.7322 17.2643C16.7559 16.288 16.7559 14.7051 17.7322 13.7288Z"></path></svg> Creative</a><a href="/articles" class="Menu__Item Menu__Item--active" aria-current="page"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 22H4C3.44772 22 3 21.5523 3 21V3C3 2.44772 3.44772 2 4 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22ZM19 20V4H5V20H19ZM7 6H11V10H7V6ZM7 12H17V14H7V12ZM7 16H17V18H7V16ZM13 7H17V9H13V7Z"></path></svg> Articles</a><div class="Menu__Item--bckg"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433 288.8c-7.7 0-14.3 5.9-14.9 13.6-6.9 83.1-76.8 147.9-161.8 147.9-89.5 0-162.4-72.4-162.4-161.4 0-87.6 70.6-159.2 158.2-161.4 2.3-.1 4.1 1.7 4.1 4v50.3c0 12.6 13.9 20.2 24.6 13.5L377 128c10-6.3 10-20.8 0-27.1l-96.1-66.4c-10.7-6.7-24.6.9-24.6 13.5v45.7c0 2.2-1.7 4-3.9 4C148 99.8 64 184.6 64 288.9 64 394.5 150.1 480 256.3 480c100.8 0 183.4-76.7 191.6-175.1.8-8.7-6.2-16.1-14.9-16.1z"></path></svg> Background</div></nav><div class="Page"><a href="/" class="CloseButton" style=""><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg></a><div class="Article"><p>If you’ve used Redux Saga before, you know how convenient it can be for handling complex async workflows in a Redux application. Instead of juggling <code>fetch</code> calls or <code>axios</code> requests directly in your React components, you write sagas that can watch for certain actions, start asynchronous tasks, handle cancellations, and dispatch results when they’re done. It keeps your code cleaner, more predictable, and easier to test.</p><p>However, even with Redux Saga, you often end up writing a fair amount of boilerplate whenever you need to handle AJAX requests. You’ll dispatch a start action, then when the request resolves you’ll dispatch a success action, or if it fails you’ll dispatch an error action. Afterward, you might need a “fulfill” action to clean up. This pattern shows up in almost every async scenario: loading indicators, data fetching, error states, and so on.</p><p><strong>Enter <code>saga-fetch</code>.</strong> This small utility helps streamline these common patterns. Instead of manually writing all the boilerplate around <code>fetch</code> or <code>axios</code> calls inside your sagas, you can let <code>saga-fetch</code> handle it. You just tell it which actions to dispatch on start, success, error, and optionally on fulfill or cancel, and it takes care of the heavy lifting.</p><h2>Getting Started</h2><p>First, install the package:</p><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-bash" style='white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#dcdcaa">npm</span><span> </span><span class="token" style="color:#dcdcaa">install</span><span> saga-fetch</span></code></div></pre><p>or with Yarn:</p><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-bash" style='white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#dcdcaa">yarn</span><span> </span><span class="token" style="color:#dcdcaa">add</span><span> saga-fetch</span></code></div></pre><p>Then, import <code>fetchWorker</code> (the main function) into your saga and use it inside a worker function. You’ll pass in a configuration object that tells <code>fetchWorker</code> how to handle the entire request lifecycle.</p><h2>Configuration Options</h2><p>When you call <code>fetchWorker</code>, you provide it with a set of actions and a method. Let’s break down the required and optional arguments:</p><ul><li><p><strong><code>action</code> (required):</strong> The Redux action you’re handling in your saga worker. This typically comes from a watcher saga (e.g., <code>takeEvery</code> or <code>takeLatest</code>) when something is dispatched like <code>SEARCH_PAGE</code>.</p></li><li><p><strong><code>method</code> (required):</strong> A function that takes the <code>action</code> and returns a Promise, typically using either <code>fetch()</code> or <code>axios.get()</code>. This is your actual API call logic.</p></li><li><p><strong><code>start</code> (required):</strong> An action creator dispatched as soon as the request begins. This is where you might toggle a loading flag in your reducer.</p></li><li><p><strong><code>success</code> (required):</strong> An action creator dispatched if the request resolves successfully. The response data from your API call will be passed to this action as a payload.</p></li><li><p><strong><code>error</code> (required):</strong> An action creator dispatched if the request fails. It will receive the error object so you can handle it gracefully (e.g., show an error message).</p></li><li><p><strong><code>fulfill</code> (optional):</strong> If you provide this action, it’s dispatched at the end of the request, no matter if it succeeded or failed. This is handy for always resetting a loading state or doing cleanup.</p></li><li><p><strong><code>cancel</code> (optional):</strong> By default, if the saga is cancelled, <code>saga-fetch</code> will dispatch a <code>CANCELLED</code> action type derived from your original <code>action</code>. You can also specify a custom cancel action. Note that this doesn’t automatically cancel the underlying AJAX request—if you want true cancellation, you’ll need to handle it in your <code>method</code> function (for example, by using axios’ cancel tokens).</p></li></ul><h2>Basic Example</h2><p>Imagine you have some actions: <code>searchPagesStart</code>, <code>searchPagesSuccess</code>, <code>searchPagesError</code>, and <code>searchPagesFulfill</code>. Your API call might look like this:</p><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#569cd6">const</span><span> </span><span class="token function-variable" style="color:#dcdcaa">searchPages</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">payload</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> title </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#dcdcaa">fetch</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">/search/pages?title=</span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">title</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></div></pre><p>Your saga worker could then be:</p><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> fork</span><span class="token" style="color:#d4d4d4">,</span><span class="token"> takeEvery </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'redux-saga/effects'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">fetchWorker</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'saga-fetch'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569cd6">function</span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#dcdcaa">searchPagesWorker</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">action</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">yield</span><span> </span><span class="token" style="color:#dcdcaa">fork</span><span class="token" style="color:#d4d4d4">(</span><span>fetchWorker</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    action</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">method</span><span class="token" style="color:#d4d4d4">:</span><span> searchPages</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">start</span><span class="token" style="color:#d4d4d4">:</span><span> searchPagesStart</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">success</span><span class="token" style="color:#d4d4d4">:</span><span> searchPagesSuccess</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">error</span><span class="token" style="color:#d4d4d4">:</span><span> searchPagesError</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">fulfill</span><span class="token" style="color:#d4d4d4">:</span><span> searchPagesFulfill</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569cd6">function</span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#dcdcaa">searchPagesWatcher</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">yield</span><span> </span><span class="token" style="color:#dcdcaa">takeEvery</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'SEARCH_PAGE'</span><span class="token" style="color:#d4d4d4">,</span><span> searchPagesWorker</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></div></pre><p>Here’s what happens when <code>SEARCH_PAGE</code> is dispatched:</p><ol><li><code>searchPagesStart</code> fires immediately (you might set <code>loading: true</code> in your store).</li><li>The <code>searchPages</code> method runs, hitting your <code>/search/pages</code> endpoint.</li><li>On a successful response, <code>searchPagesSuccess</code> fires with the data.</li><li>If there’s an error, <code>searchPagesError</code> gets dispatched with the error.</li><li>Regardless of success or failure, <code>searchPagesFulfill</code> runs at the end, letting you do any final state changes (like <code>loading: false</code>).</li></ol><h2>A More Advanced Example</h2><p>What if you want to integrate this with other libraries like <code>redux-saga-routines</code>, <code>redux-actions</code>, or <code>axios</code>? Here’s a quick taste:</p><ul><li>Use <code>axios</code> with a cancel token for real cancellation support.</li><li>Delay the request slightly to simulate some waiting time.</li><li>Use <code>redux-saga-routines</code> to generate a set of standard actions.</li></ul><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> fork</span><span class="token" style="color:#d4d4d4">,</span><span class="token"> takeLatest</span><span class="token" style="color:#d4d4d4">,</span><span class="token"> delay </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'redux-saga/effects'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">fetch</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'saga-fetch'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">axios</span><span class="token" style="color:#d4d4d4">,</span><span class="token"> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> </span><span class="token" style="color:#9cdcfe">CancelToken</span><span class="token"> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'axios'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> createRoutine </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'redux-saga-routines'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569cd6">const</span><span> search </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">createRoutine</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'search/pages'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Define your API method with axios:</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#569cd6">const</span><span> </span><span class="token function-variable" style="color:#dcdcaa">searchPages</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">payload</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> title </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569cd6">const</span><span> source </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#4ec9b0">CancelToken</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">source</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569cd6">const</span><span> request </span><span class="token" style="color:#d4d4d4">=</span><span> axios</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">get</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">/search/pages?title=</span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">title</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token literal-property" style="color:#9cdcfe">cancelToken</span><span class="token" style="color:#d4d4d4">:</span><span> source</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">token</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  request</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#9cdcfe">CANCEL</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> source</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">cancel</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// enabling saga cancellation</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">return</span><span> request</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569cd6">function</span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#dcdcaa">searchPagesWorker</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">action</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Optional delay</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">yield</span><span> </span><span class="token" style="color:#dcdcaa">delay</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">142</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">yield</span><span> </span><span class="token" style="color:#dcdcaa">fork</span><span class="token" style="color:#d4d4d4">(</span><span>fetch</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    action</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">method</span><span class="token" style="color:#d4d4d4">:</span><span> searchPages</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">start</span><span class="token" style="color:#d4d4d4">:</span><span> search</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">request</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">success</span><span class="token" style="color:#d4d4d4">:</span><span> search</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">success</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">error</span><span class="token" style="color:#d4d4d4">:</span><span> search</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">failure</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">fulfill</span><span class="token" style="color:#d4d4d4">:</span><span> search</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">fulfill</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#569cd6">function</span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#dcdcaa">searchPagesWatcher</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">yield</span><span> </span><span class="token" style="color:#dcdcaa">takeLatest</span><span class="token" style="color:#d4d4d4">(</span><span>search</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">TRIGGER</span><span class="token" style="color:#d4d4d4">,</span><span> searchPagesWorker</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></div></pre><p>In your reducer, you can handle these routine actions with <code>handleActions</code> from <code>redux-actions</code>:</p><pre><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> handleActions </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'redux-actions'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">search</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">'./routines'</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569cd6">const</span><span> initialState </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">loading</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">false</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">error</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token literal-property" style="color:#9cdcfe">message</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">''</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token literal-property" style="color:#9cdcfe">code</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">results</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">handleActions</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">[</span><span>search</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">REQUEST</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#9cdcfe">state</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token spread" style="color:#d4d4d4">...</span><span>state</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">loading</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span>
<span>  </span><span class="token" style="color:#d4d4d4">[</span><span>search</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">SUCCESS</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">state</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">payload</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> results </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token spread" style="color:#d4d4d4">...</span><span>state</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    results</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span>
<span>  </span><span class="token" style="color:#d4d4d4">[</span><span>search</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">FAILURE</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">state</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> </span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">payload</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> error </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token spread" style="color:#d4d4d4">...</span><span>state</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    error</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span>
<span>  </span><span class="token" style="color:#d4d4d4">[</span><span>search</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">FULFILL</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#9cdcfe">state</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token spread" style="color:#d4d4d4">...</span><span>state</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">loading</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">false</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span> initialState</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></div></pre><p><code>search.FULFILL</code> runs after either <code>search.SUCCESS</code> or <code>search.FAILURE</code>, ensuring that your <code>loading</code> state always returns to <code>false</code> at the end.</p><h2>Additional Notes</h2><p>If you need a <code>CANCELLED</code> state or want to customize cancellation behavior further, check out <a href="https://www.npmjs.com/package/extend-saga-routines">extend-saga-routines</a> for advanced routine handling. With <code>axios</code> and cancel tokens, you can cleanly integrate saga cancellation logic and ensure that requests are actually aborted in-flight.</p><hr><p><strong>In summary</strong>, <code>saga-fetch</code> helps you avoid repetitive boilerplate when handling async requests in Redux Saga. By providing a clear configuration object that specifies what to do on start, success, error, and optional fulfill/cancel steps, you can keep your sagas lean and focused on logic rather than wiring up a bunch of actions. Whether you’re using <code>fetch</code>, <code>axios</code>, <code>redux-saga-routines</code>, or just plain <code>redux-actions</code>, <code>saga-fetch</code> slides right in to streamline your workflow.</p></div></div></div></div><script>!function(e){function r(r){for(var n,a,i=r[0],c=r[1],l=r[2],s=0,p=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(r);p.length;)p.shift()();return u.push.apply(u,l||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,i=1;i<t.length;i++){var c=t[i];0!==o[c]&&(n=!1)}n&&(u.splice(r--,1),e=a(a.s=t[0]))}return e}var n={},o={1:0},u=[];function a(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var r=[],t=o[e];if(0!==t)if(t)r.push(t[2]);else{var n=new Promise((function(r,n){t=o[e]=[r,n]}));r.push(t[2]=n);var u,i=document.createElement("script");i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=function(e){return a.p+"static/js/"+({}[e]||e)+"."+{3:"a580e7b2"}[e]+".chunk.js"}(e);var c=new Error;u=function(r){i.onerror=i.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var n=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+u+")",c.name="ChunkLoadError",c.type=n,c.request=u,t[1](c)}o[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:i})}),12e4);i.onerror=i.onload=u,document.head.appendChild(i)}return Promise.all(r)},a.m=e,a.c=n,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)a.d(t,n,function(r){return e[r]}.bind(null,n));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="/",a.oe=function(e){throw console.error(e),e};var i=this["webpackJsonpshapkarin.me"]=this["webpackJsonpshapkarin.me"]||[],c=i.push.bind(i);i.push=r,i=i.slice();for(var l=0;l<i.length;l++)r(i[l]);var f=c;t()}([])</script><script src="/static/js/2.af601c69.chunk.js"></script><script src="/static/js/main.1ca7e1f3.chunk.js"></script><canvas height="850" id="background" width="480"></canvas></body></html>